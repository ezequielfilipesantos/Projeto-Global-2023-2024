CREATE TABLE EfeitoPedido (IDEfeito SERIAL NOT NULL, Descritivo varchar(255), PRIMARY KEY (IDEfeito));
CREATE TABLE Estado (IDEstado SERIAL NOT NULL, Descritivo varchar(255), PRIMARY KEY (IDEstado));
CREATE TABLE AvaliaçãoMédica (IDAvaliação SERIAL NOT NULL, DetalhesAvaliação varchar(255), dataAvaliação date, PedidoAvaliaçãoMédicaUtenteUtenteID int4 NOT NULL, PRIMARY KEY (IDAvaliação));
CREATE TABLE Utente (UtenteID SERIAL NOT NULL, NomeUtente varchar(100), NISS int8, CC varchar(12), LocalidadeEmissãoDSIC varchar(255), DataEmissãoDSIC date, DataValidadeCC date, NIF varchar(9), DataNascimento date, FreguesiaNaturalidade varchar(255), ConcelhoNaturalidade varchar(255), PaisNaturalidade varchar(255), CartãoResidência int4, UtentePréviamenteSubmetidoAJM bool, PRIMARY KEY (UtenteID));
CREATE TABLE Médico (MedicoID SERIAL NOT NULL, NomeMedico varchar(100), Função varchar(255), Especialidade varchar(100), PRIMARY KEY (MedicoID));
CREATE TABLE AgregadoJuntaMédica (JMID SERIAL NOT NULL, MedicoMedicoID int4 NOT NULL, DataConstituição int4, PRIMARY KEY (JMID));
CREATE TABLE UtenteContacto (Telefone int4 NOT NULL, UtenteIdentificaçãoUtenteID int4 NOT NULL, PRIMARY KEY (Telefone, UtenteIdentificaçãoUtenteID));
CREATE TABLE UtenteResidênciaCP (CP varchar(100) NOT NULL, Localidade varchar(100), PRIMARY KEY (CP));
CREATE TABLE UtenteResidência (MoradaID SERIAL NOT NULL, RuaResidência varchar(100), DistritoResidência varchar(100), FreguesiaResidência varchar(100), ConcelhoResidência varchar(100), CodigoPostalCP varchar(100) NOT NULL, UtenteIdentificaçãoUtenteID int4 NOT NULL, PRIMARY KEY (MoradaID));
CREATE TABLE MédicoLogin ("E-Mail" varchar(64) NOT NULL, Password varchar(64), MedicoMedicoID int4 NOT NULL, PRIMARY KEY ("E-Mail"));
CREATE TABLE PedidoJMInfomarçãoAdicional (dataReavaliaçãoPedidoJM date, PedidoAvaliaçãoMédicaUtenteUtenteID int4 NOT NULL);
CREATE TABLE Documentos (Ordem int4 NOT NULL, PedidoAvaliaçãoMédicaUtenteUtenteID int4 NOT NULL, Documento varchar(255), PRIMARY KEY (Ordem, PedidoAvaliaçãoMédicaUtenteUtenteID));
CREATE TABLE UtenteLogin (Email varchar(64) NOT NULL, Password varchar(64), UtenteIdentificaçãoUtenteID int4 NOT NULL, PRIMARY KEY (Email));
CREATE TABLE Condição (CondiçãoID SERIAL NOT NULL, TotalIncapacidade int4, CapacidadeRestante int4, Desvalorização int4, AvaliaçãoMédicaIDAvaliação int4 NOT NULL, PRIMARY KEY (CondiçãoID));
CREATE TABLE Incapacidade (NumeroIncapacidadeID SERIAL NOT NULL, CondiçãoCondiçãoID int4 NOT NULL, Capitulo int4, Número int4, Alinea int4, Coeficiente int4, NomeIncapacidade varchar(255), IncapacidadeMínima float8, IncapacidadeMáxima float8, PRIMARY KEY (NumeroIncapacidadeID));
CREATE TABLE DiagnósticoMédico (DiagnosticoID SERIAL NOT NULL, MedicoMedicoID int4 NOT NULL, AvaliaçãoMédicaIDAvaliação int4 NOT NULL, AvaliaçãoIncapacidade int4, DataDiagnóstico date, PRIMARY KEY (DiagnosticoID));
CREATE TABLE JuntaMédicaAvaliação (AvaliaçãoJuntaMédicaID SERIAL NOT NULL, ACES varchar(255), ARS varchar(255), ValorFinalIncapacidade float4, Decisão varchar(255), Notas varchar(255), DataDecisão date, JuntaMédicaJMID int4 NOT NULL, PRIMARY KEY (AvaliaçãoJuntaMédicaID));
CREATE TABLE PedidoAvaliaçãoMédica (UtenteUtenteID int4 NOT NULL, dataPedido int4, LocalidadePedido int4, TeCAssinado bool, EfeitoIDEfeito int4 NOT NULL, EstadoIDEstado int4 NOT NULL, PRIMARY KEY (UtenteUtenteID));
CREATE TABLE AgendamentoJuntaMédica (AgendamentoID SERIAL NOT NULL, JuntaMédicaAvaliaçãoAvaliaçãoJuntaMédicaID int4 NOT NULL, DataAgendamentoJuntaMédica date, TipoDeAvaliação varchar(32), PRIMARY KEY (AgendamentoID));
ALTER TABLE PedidoAvaliaçãoMédica ADD CONSTRAINT FKPedidoAval946019 FOREIGN KEY (EfeitoIDEfeito) REFERENCES EfeitoPedido (IDEfeito);
ALTER TABLE PedidoAvaliaçãoMédica ADD CONSTRAINT FKPedidoAval992581 FOREIGN KEY (EstadoIDEstado) REFERENCES Estado (IDEstado);
ALTER TABLE AgregadoJuntaMédica ADD CONSTRAINT FKAgregadoJu901910 FOREIGN KEY (MedicoMedicoID) REFERENCES Médico (MedicoID);
ALTER TABLE UtenteContacto ADD CONSTRAINT FKUtenteCont514312 FOREIGN KEY (UtenteIdentificaçãoUtenteID) REFERENCES Utente (UtenteID);
ALTER TABLE UtenteResidência ADD CONSTRAINT FKUtenteResi466631 FOREIGN KEY (CodigoPostalCP) REFERENCES UtenteResidênciaCP (CP);
ALTER TABLE MédicoLogin ADD CONSTRAINT FKMédicoLogi209529 FOREIGN KEY (MedicoMedicoID) REFERENCES Médico (MedicoID);
ALTER TABLE PedidoJMInfomarçãoAdicional ADD CONSTRAINT FKPedidoJMIn583025 FOREIGN KEY (PedidoAvaliaçãoMédicaUtenteUtenteID) REFERENCES PedidoAvaliaçãoMédica (UtenteUtenteID);
ALTER TABLE Documentos ADD CONSTRAINT FKDocumentos679363 FOREIGN KEY (PedidoAvaliaçãoMédicaUtenteUtenteID) REFERENCES PedidoAvaliaçãoMédica (UtenteUtenteID);
ALTER TABLE UtenteLogin ADD CONSTRAINT FKUtenteLogi736733 FOREIGN KEY (UtenteIdentificaçãoUtenteID) REFERENCES Utente (UtenteID);
ALTER TABLE UtenteResidência ADD CONSTRAINT FKUtenteResi488621 FOREIGN KEY (UtenteIdentificaçãoUtenteID) REFERENCES Utente (UtenteID);
ALTER TABLE DiagnósticoMédico ADD CONSTRAINT FKDiagnóstic779614 FOREIGN KEY (MedicoMedicoID) REFERENCES Médico (MedicoID);
ALTER TABLE DiagnósticoMédico ADD CONSTRAINT FKDiagnóstic392115 FOREIGN KEY (AvaliaçãoMédicaIDAvaliação) REFERENCES AvaliaçãoMédica (IDAvaliação);
ALTER TABLE PedidoAvaliaçãoMédica ADD CONSTRAINT FKPedidoAval601144 FOREIGN KEY (UtenteUtenteID) REFERENCES Utente (UtenteID);
ALTER TABLE AgendamentoJuntaMédica ADD CONSTRAINT FKAgendament257599 FOREIGN KEY (JuntaMédicaAvaliaçãoAvaliaçãoJuntaMédicaID) REFERENCES JuntaMédicaAvaliação (AvaliaçãoJuntaMédicaID);
ALTER TABLE AvaliaçãoMédica ADD CONSTRAINT FKAvaliaçãoM963314 FOREIGN KEY (PedidoAvaliaçãoMédicaUtenteUtenteID) REFERENCES PedidoAvaliaçãoMédica (UtenteUtenteID);
ALTER TABLE JuntaMédicaAvaliação ADD CONSTRAINT FKJuntaMédic47583 FOREIGN KEY (JuntaMédicaJMID) REFERENCES AgregadoJuntaMédica (JMID);
ALTER TABLE Condição ADD CONSTRAINT FKCondição384816 FOREIGN KEY (AvaliaçãoMédicaIDAvaliação) REFERENCES AvaliaçãoMédica (IDAvaliação);
ALTER TABLE Incapacidade ADD CONSTRAINT FKIncapacida861426 FOREIGN KEY (CondiçãoCondiçãoID) REFERENCES Condição (CondiçãoID);
